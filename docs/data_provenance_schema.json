{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Monenete Data Provenance Report",
  "type": "object",
  "required": [
    "schema_version",
    "generated_at",
    "fixtures_real",
    "sources",
    "fixtures",
    "checks"
  ],
  "properties": {
    "schema_version": { "type": "integer", "const": 1 },
    "generated_at": { "type": "string", "minLength": 1 },
    "fixtures_real": { "type": "boolean", "const": true },
    "manifest_path": { "type": "string" },
    "sources": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["provider", "method", "collected_at"],
        "properties": {
          "provider": { "type": "string", "minLength": 1 },
          "method": { "type": "string", "minLength": 1 },
          "collected_at": { "type": "string", "minLength": 1 },
          "notes": { "type": "string" }
        },
        "additionalProperties": false
      }
    },
    "fixtures": {
      "type": "object",
      "required": ["bags", "non_bags_dbc", "wallet_actions", "quotes", "holders"],
      "properties": {
        "bags": {
          "type": "object",
          "required": ["count", "files", "signatures"],
          "properties": {
            "count": { "type": "integer", "minimum": 10 },
            "files": { "type": "array", "items": { "type": "string" } },
            "signatures": { "type": "array", "items": { "type": "string" } }
          },
          "additionalProperties": false
        },
        "non_bags_dbc": {
          "type": "object",
          "required": ["count", "files", "signatures"],
          "properties": {
            "count": { "type": "integer", "minimum": 20 },
            "files": { "type": "array", "items": { "type": "string" } },
            "signatures": { "type": "array", "items": { "type": "string" } }
          },
          "additionalProperties": false
        },
        "wallet_actions": {
          "type": "object",
          "required": ["count", "files", "signatures"],
          "properties": {
            "count": { "type": "integer", "minimum": 50 },
            "files": { "type": "array", "items": { "type": "string" } },
            "signatures": { "type": "array", "items": { "type": "string" } }
          },
          "additionalProperties": false
        },
        "quotes": {
          "type": "object",
          "required": ["count", "files"],
          "properties": {
            "count": { "type": "integer", "minimum": 50 },
            "files": { "type": "array", "items": { "type": "string" } }
          },
          "additionalProperties": false
        },
        "holders": {
          "type": "object",
          "required": ["count", "files"],
          "properties": {
            "count": { "type": "integer", "minimum": 10 },
            "files": { "type": "array", "items": { "type": "string" } }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "checks": {
      "type": "object",
      "required": [
        "all_files_present",
        "all_signatures_valid",
        "no_synthetic",
        "manifest_matches"
      ],
      "properties": {
        "all_files_present": { "type": "boolean", "const": true },
        "all_signatures_valid": { "type": "boolean", "const": true },
        "no_synthetic": { "type": "boolean", "const": true },
        "manifest_matches": { "type": "boolean", "const": true }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
